<?xml version="1.0"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
							 "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<refentry id="GeoclueAddress">
<refmeta>
<refentrytitle role="top_of_page" id="GeoclueAddress.top_of_page">GeoclueAddress</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo>GEOCLUE Library</refmiscinfo>
</refmeta>

<refnamediv>
<refname>GeoclueAddress</refname>
<refpurpose>Geoclue address client API</refpurpose>
<!--[<xref linkend="desc" endterm="desc.title"/>]-->
</refnamediv>

<refsynopsisdiv id="GeoclueAddress.synopsis" role="synopsis">
<title role="synopsis.title">Synopsis</title>

<synopsis>
#define             <link linkend="GEOCLUE-ADDRESS-INTERFACE-NAME:CAPS">GEOCLUE_ADDRESS_INTERFACE_NAME</link>
                    <link linkend="GeoclueAddress-struct">GeoclueAddress</link>;
<link linkend="GeoclueAddress">GeoclueAddress</link>*     <link linkend="geoclue-address-new">geoclue_address_new</link>                 (const <link linkend="char">char</link> *service,
                                                         const <link linkend="char">char</link> *path);
<link linkend="gboolean">gboolean</link>            <link linkend="geoclue-address-get-address">geoclue_address_get_address</link>         (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="int">int</link> *timestamp,
                                                         <link linkend="GHashTable">GHashTable</link> **details,
                                                         <link linkend="GeoclueAccuracy">GeoclueAccuracy</link> **accuracy,
                                                         <link linkend="GError">GError</link> **error);
<link linkend="void">void</link>                (<link linkend="GeoclueAddressCallback">*GeoclueAddressCallback</link>)           (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="int">int</link> timestamp,
                                                         <link linkend="GHashTable">GHashTable</link> *details,
                                                         <link linkend="GeoclueAccuracy">GeoclueAccuracy</link> *accuracy,
                                                         <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> userdata);
<link linkend="void">void</link>                <link linkend="geoclue-address-get-address-async">geoclue_address_get_address_async</link>   (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="GeoclueAddressCallback">GeoclueAddressCallback</link> callback,
                                                         <link linkend="gpointer">gpointer</link> userdata);
</synopsis>
</refsynopsisdiv>

<refsect1 id="GeoclueAddress.object-hierarchy" role="object_hierarchy">
<title role="object_hierarchy.title">Object Hierarchy</title>
<synopsis>
  <link linkend="GObject">GObject</link>
   +----<link linkend="GeoclueProvider">GeoclueProvider</link>
         +----GeoclueAddress
</synopsis>

</refsect1>






<refsect1 id="GeoclueAddress.signals" role="signal_proto">
<title role="signal_proto.title">Signals</title>
<synopsis>
  &quot;<link linkend="GeoclueAddress-address-changed">address-changed</link>&quot;                                : Run First / No Recursion
</synopsis>
</refsect1>


<refsect1 id="GeoclueAddress.description" role="desc">
<title role="desc.title">Description</title>
<para>
<link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> contains Address-related methods and signals. 
It is part of the Geoclue public C client API which uses D-Bus 
to communicate with the actual provider.
</para>
<para>
After a <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> is created with <link linkend="geoclue-address-new"><function>geoclue_address_new()</function></link> or 
<link linkend="geoclue-master-client-create-address"><function>geoclue_master_client_create_address()</function></link>, the 
<link linkend="geoclue-address-get-address"><function>geoclue_address_get_address()</function></link> and <link linkend="geoclue-address-get-address-async"><function>geoclue_address_get_address_async()</function></link> methods 
and the address-changed signal can be used to obtain the current address. 
</para>
<para>
Address <link linkend="GHashTable"><type>GHashTable</type></link> keys are defined in 
<ulink url="geoclue-types.html">geoclue-types.h</ulink>. See also 
convenience functions in 
<ulink url="geoclue-address-details.html">geoclue-address-details.h</ulink>.</para>
<para>

</para>
</refsect1>

<refsect1 id="GeoclueAddress.details" role="details">
<title role="details.title">Details</title>
<refsect2 id="GEOCLUE-ADDRESS-INTERFACE-NAME:CAPS" role="macro">
<title>GEOCLUE_ADDRESS_INTERFACE_NAME</title>
<indexterm zone="GEOCLUE-ADDRESS-INTERFACE-NAME:CAPS"><primary>GEOCLUE_ADDRESS_INTERFACE_NAME</primary></indexterm><programlisting>#define GEOCLUE_ADDRESS_INTERFACE_NAME "org.freedesktop.Geoclue.Address"
</programlisting>
<para>

</para></refsect2>
<refsect2 id="GeoclueAddress-struct" role="struct">
<title>GeoclueAddress</title>
<indexterm zone="GeoclueAddress-struct"><primary>GeoclueAddress</primary></indexterm><programlisting>typedef struct _GeoclueAddress GeoclueAddress;</programlisting>
<para>

</para></refsect2>
<refsect2 id="geoclue-address-new" role="function">
<title>geoclue_address_new ()</title>
<indexterm zone="geoclue-address-new"><primary>geoclue_address_new</primary></indexterm><programlisting><link linkend="GeoclueAddress">GeoclueAddress</link>*     geoclue_address_new                 (const <link linkend="char">char</link> *service,
                                                         const <link linkend="char">char</link> *path);</programlisting>
<para>
Creates a <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> with given D-Bus service name and path.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>service</parameter>&nbsp;:</term>
<listitem><simpara> D-Bus service name
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>path</parameter>&nbsp;:</term>
<listitem><simpara> D-Bus path name
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&nbsp;:</term><listitem><simpara> Pointer to a new <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link>
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="geoclue-address-get-address" role="function">
<title>geoclue_address_get_address ()</title>
<indexterm zone="geoclue-address-get-address"><primary>geoclue_address_get_address</primary></indexterm><programlisting><link linkend="gboolean">gboolean</link>            geoclue_address_get_address         (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="int">int</link> *timestamp,
                                                         <link linkend="GHashTable">GHashTable</link> **details,
                                                         <link linkend="GeoclueAccuracy">GeoclueAccuracy</link> **accuracy,
                                                         <link linkend="GError">GError</link> **error);</programlisting>
<para>
Obtains the current address. <parameter>timestamp</parameter> will contain the time of 
the actual address measurement. <parameter>accuracy</parameter> is the estimated of the
accuracy of the current address information (see <link linkend="GeoclueAccuracy"><type>GeoclueAccuracy</type></link> 
for more details). <parameter>details</parameter> is a hashtable with the address data, 
see <ulink url="geoclue-types.html">geoclue-types.h</ulink> for the 
hashtable keys.
</para>
<para>
If the caller is not interested in some values, the pointers can be 
left <link linkend="NULL:CAPS"><literal>NULL</literal></link>.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>address</parameter>&nbsp;:</term>
<listitem><simpara> A <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> object
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timestamp</parameter>&nbsp;:</term>
<listitem><simpara> Pointer to returned time of address measurement (Unix timestamp) or <link linkend="NULL:CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>details</parameter>&nbsp;:</term>
<listitem><simpara> Pointer to returned <link linkend="GHashTable"><type>GHashTable</type></link> with address details or <link linkend="NULL:CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>accuracy</parameter>&nbsp;:</term>
<listitem><simpara> Pointer to returned <link linkend="GeoclueAccuracy"><type>GeoclueAccuracy</type></link> or NULL
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&nbsp;:</term>
<listitem><simpara> Pointer to returned <link linkend="Gerror"><type>Gerror</type></link> or <link linkend="NULL:CAPS"><literal>NULL</literal></link>
</simpara></listitem></varlistentry>
<varlistentry><term><emphasis>Returns</emphasis>&nbsp;:</term><listitem><simpara> <link linkend="TRUE:CAPS"><literal>TRUE</literal></link> if there is no <parameter>error</parameter>
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="GeoclueAddressCallback" role="function">
<title>GeoclueAddressCallback ()</title>
<indexterm zone="GeoclueAddressCallback"><primary>GeoclueAddressCallback</primary></indexterm><programlisting><link linkend="void">void</link>                (*GeoclueAddressCallback)           (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="int">int</link> timestamp,
                                                         <link linkend="GHashTable">GHashTable</link> *details,
                                                         <link linkend="GeoclueAccuracy">GeoclueAccuracy</link> *accuracy,
                                                         <link linkend="GError">GError</link> *error,
                                                         <link linkend="gpointer">gpointer</link> userdata);</programlisting>
<para>
Callback function for <link linkend="geoclue-address-get-address-async"><function>geoclue_address_get_address_async()</function></link>.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>address</parameter>&nbsp;:</term>
<listitem><simpara> the <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> object emitting the signal
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timestamp</parameter>&nbsp;:</term>
<listitem><simpara> Time of address measurement (Unix timestamp)
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>details</parameter>&nbsp;:</term>
<listitem><simpara> Address details as <link linkend="GHashTable"><type>GHashTable</type></link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>accuracy</parameter>&nbsp;:</term>
<listitem><simpara> Accuracy of measurement as <link linkend="GeoclueAccuracy"><type>GeoclueAccuracy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>error</parameter>&nbsp;:</term>
<listitem><simpara> Error as <link linkend="Gerror"><type>Gerror</type></link> (may be <link linkend="NULL:CAPS"><literal>NULL</literal></link>)
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>userdata</parameter>&nbsp;:</term>
<listitem><simpara> User data pointer set in <link linkend="geoclue-position-get-position-async"><function>geoclue_position_get_position_async()</function></link>
</simpara></listitem></varlistentry>
</variablelist></refsect2>
<refsect2 id="geoclue-address-get-address-async" role="function">
<title>geoclue_address_get_address_async ()</title>
<indexterm zone="geoclue-address-get-address-async"><primary>geoclue_address_get_address_async</primary></indexterm><programlisting><link linkend="void">void</link>                geoclue_address_get_address_async   (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                         <link linkend="GeoclueAddressCallback">GeoclueAddressCallback</link> callback,
                                                         <link linkend="gpointer">gpointer</link> userdata);</programlisting>
<para>
Function returns (essentially) immediately and calls <parameter>callback</parameter> when current address
is available or when D-Bus timeouts.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>address</parameter>&nbsp;:</term>
<listitem><simpara> A <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> object
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>callback</parameter>&nbsp;:</term>
<listitem><simpara> A <link linkend="GeoclueAddressCallback"><type>GeoclueAddressCallback</type></link> function that should be called when return values are available
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>userdata</parameter>&nbsp;:</term>
<listitem><simpara> pointer for user specified data
</simpara></listitem></varlistentry>
</variablelist></refsect2>

</refsect1>

<refsect1 id="GeoclueAddress.signal-details" role="signals">
<title role="signals.title">Signal Details</title>
<refsect2 id="GeoclueAddress-address-changed"><title>The <literal>&quot;address-changed&quot;</literal> signal</title>
<indexterm zone="GeoclueAddress-address-changed"><primary>GeoclueAddress::address-changed</primary></indexterm><programlisting><link linkend="void">void</link>                user_function                      (<link linkend="GeoclueAddress">GeoclueAddress</link> *address,
                                                        <link linkend="gint">gint</link>            timestamp,
                                                        <link linkend="gpointer">gpointer</link>        details,
                                                        <link linkend="gpointer">gpointer</link>        accuracy,
                                                        <link linkend="gpointer">gpointer</link>        user_data)      : Run First / No Recursion</programlisting>
<para>
The address-changed signal is emitted each time the address changes. 
See <ulink url="geoclue-types.html">geoclue-types.h</ulink> for the possible 
GEOCLUE_ADDRESS_KEY_* keys used in <parameter>details</parameter>.
</para>
<para>
Note that not all providers support signals.</para>
<para>

</para><variablelist role="params">
<varlistentry><term><parameter>address</parameter>&nbsp;:</term>
<listitem><simpara> the <link linkend="GeoclueAddress"><type>GeoclueAddress</type></link> object emitting the signal
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>timestamp</parameter>&nbsp;:</term>
<listitem><simpara> Time of address measurement (Unix timestamp)
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>details</parameter>&nbsp;:</term>
<listitem><simpara> Address details as <link linkend="GHashTable"><type>GHashTable</type></link>.
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>accuracy</parameter>&nbsp;:</term>
<listitem><simpara> Accuracy of measurement as <link linkend="GeoclueAccuracy"><type>GeoclueAccuracy</type></link>
</simpara></listitem></varlistentry>
<varlistentry><term><parameter>user_data</parameter>&nbsp;:</term>
<listitem><simpara>user data set when the signal handler was connected.</simpara></listitem></varlistentry>
</variablelist></refsect2>
</refsect1>



</refentry>
